language: node_js
node_js:
- '8'
cache:
- yarn
notifications:
  email: false
  slack:
    secure: Jg8siVL/fxqSt60cUZn63VpsEWDQvgHYq3YucWm3y0dPmRJ079XEAQ/PAL8YrlecP0to1SCibdj4ArqPCvkrhFrwrumKRFaALksjlzOnAG9jfXRQTRM7S2Yht3R0uB1Zucp995m3O0p41+bofRGfmY77q2sSeku69QLdyiAtB6BY7zLQOeYdv31zJKg7MibX4pU6211HLCnegVwvYx0oBRJs5QkkKAeO8FUJrNmuARopNyY5oFeLv80I/RYAmRpy4wMB7ehTqAzQl3AhswwR2qT4vf8/8LWIgFhEJYPudcq2L6ke6qHQX32oJuHnzUYkHhyUOvEz5Pm5rAKBv0Y9QF+uuukvgBIbpUwYXvAJoUf3k8kkTiU9GqkkkEZxMX39wbij9/Vs7n/St1V6HR8G+aCZoemiPNquGbmRNyqXZWSoIR0FmL2tFmVVvS2sp+qhSci4FpM7oZOm88+eqJSClNZxe9wTrZ8F+qDu28jPEoudqYDca0xfIiZq6IgVCnOYpuD0FQXrw1bDLDK4BYKJaqk5/yVCii8WlRrKnl5vYAleMjJw9uEP+VoOoH4qcx6tLfGDHrgwS5/aKimwj/SywgcmZGABbPfg9oLQ9h3fJLlJiRW5PnTRI2Uq4AV6suruANlYMpX1Pu7cW2pzFMkMPToabTT1EWN8H19SfGep430=
script:
- yarn install
- yarn build
deploy:
- provider: gae
  skip_cleanup: true
  config: app-test.yaml
  keyfile: web-jz-test-sa.json
  project: web-test-2019-javazone-no
  on: develop
- provider: gae
  skip_cleanup: true
  config: app-prod.yaml
  keyfile: web-jz-prod-sa.json
  project: web-2019-javazone-no
  on: master
before_install:
- openssl aes-256-cbc -K $encrypted_889fcfe41a2c_key -iv $encrypted_889fcfe41a2c_iv
  -in gcp.tar.enc -out gcp.tar -d
- tar xvf gcp.tar
